<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Coffee CSOS</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <style>
        :root {
            --primary-color: #6f4e37;
            --secondary-color: #c7a17a;
            --accent-color: #f4e4c1;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #5a3d2b 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .role-gm {
            background: var(--accent-color);
            color: var(--primary-color);
        }
        
        .role-im {
            background: var(--secondary-color);
            color: white;
        }
        
        .role-emp {
            background: #8b6f47;
            color: white;
        }
        
        .app-card {
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            color: inherit;
        }
        
        .app-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15) !important;
        }
        
        .app-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }
        
        .app-icon svg {
            width: 64px;
            height: 64px;
        }
        
        .logout-btn {
            background: rgba(255,255,255,0.2);
            transition: background 0.3s;
        }
        
        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body class="bg-light">
    <!-- Header -->
    <div class="header">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="h3 mb-0"><i class="bi bi-cup-hot-fill"></i> CSOS</h1>
            <a href="{% url 'core:logout' %}" class="btn logout-btn text-white">Logout</a>
        </div>
    </div>
    
    <!-- Messages -->
    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <!-- Main Content -->
    <div class="container my-5">
        <!-- Welcome Card -->
        <div class="card shadow-sm mb-4">
            <div class="card-body p-4">
                <h2 class="h4 mb-2">Welcome, {{ user.username }}!</h2>
                <p class="mb-0">
                    Role: 
                    <span class="badge role-badge {% if user.role == 'GENERAL_MANAGER' %}role-gm{% elif user.role == 'INVENTORY_MANAGER' %}role-im{% else %}role-emp{% endif %} px-3 py-2">
                        {{ role }}
                    </span>
                </p>
            </div>
        </div>
        
        <!-- Applications Grid -->
        <h2 class="h4 mb-3">Your Applications</h2>
        
        <div class="row g-3">
            <!-- Customer -->
            <div class="col-md-6 col-lg-3">
                <a href="/customer/" class="app-card card shadow-sm text-center p-4">
                    <div class="card-body">
                        <div class="app-icon mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--primary-color)">
                                <path d="M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z" />
                            </svg>
                        </div>
                        <h3 class="h6 mb-2">Customer</h3>
                        <p class="text-muted small mb-0">Manage customers and orders</p>
                    </div>
                </a>
            </div>
            
            <!-- Pegawai -->
            <div class="col-md-6 col-lg-3">
                <a href="/pegawai/" class="app-card card shadow-sm text-center p-4 {% if not can_access_pegawai %}disabled{% endif %}">
                    <div class="card-body">
                        <div class="app-icon mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--primary-color)">
                                <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        <h3 class="h6 mb-2">Pegawai</h3>
                        <p class="text-muted small mb-0">Employee management</p>
                        {% if not can_access_pegawai %}
                        <p class="text-danger small mt-2 mb-0"><i class="bi bi-lock-fill"></i> Access Denied</p>
                        {% endif %}
                    </div>
                </a>
            </div>
            
            <!-- Logistik -->
            <div class="col-md-6 col-lg-3">
                <a href="/logistik/" class="app-card card shadow-sm text-center p-4 {% if not can_access_logistik %}disabled{% endif %}">
                    <div class="card-body">
                        <div class="app-icon mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--primary-color)">
                                <path fill-rule="evenodd" d="M5.478 5.559A1.5 1.5 0 0 1 6.912 4.5H9A.75.75 0 0 0 9 3H6.912a3 3 0 0 0-2.868 2.118l-2.411 7.838a3 3 0 0 0-.133.882V18a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0 0 17.088 3H15a.75.75 0 0 0 0 1.5h2.088a1.5 1.5 0 0 1 1.434 1.059l2.213 7.191H17.89a3 3 0 0 0-2.684 1.658l-.256.513a1.5 1.5 0 0 1-1.342.829h-3.218a1.5 1.5 0 0 1-1.342-.83l-.256-.512a3 3 0 0 0-2.684-1.658H3.265l2.213-7.191Z" clip-rule="evenodd" />
                                <path fill-rule="evenodd" d="M12 2.25a.75.75 0 0 1 .75.75v6.44l1.72-1.72a.75.75 0 1 1 1.06 1.06l-3 3a.75.75 0 0 1-1.06 0l-3-3a.75.75 0 0 1 1.06-1.06l1.72 1.72V3a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        <h3 class="h6 mb-2">Logistik</h3>
                        <p class="text-muted small mb-0">Inventory & suppliers</p>
                        {% if not can_access_logistik %}
                        <p class="text-danger small mt-2 mb-0"><i class="bi bi-lock-fill"></i> Access Denied</p>
                        {% endif %}
                    </div>
                </a>
            </div>
            
            <!-- Report -->
            <div class="col-md-6 col-lg-3">
                <a href="/reports/" class="app-card card shadow-sm text-center p-4 {% if not can_access_report %}disabled{% endif %}">
                    <div class="card-body">
                        <div class="app-icon mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--primary-color)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
                            </svg>
                        </div>
                        <h3 class="h6 mb-2">Report</h3>
                        <p class="text-muted small mb-0">Business analytics</p>
                        {% if not can_access_report %}
                        <p class="text-danger small mt-2 mb-0"><i class="bi bi-lock-fill"></i> Access Denied</p>
                        {% endif %}
                    </div>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
